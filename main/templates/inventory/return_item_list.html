{% extends 'base.html' %}

{% block content %}
<div class="container mt-4" style="margin-bottom:200px;">
    <div class="card text-white" style="background-color: #5bc0de; /* Custom color between sky blue and blue */">
      <div class="card-body text-center">
        <h2 class="card-title">RETURN ITEM LIST</h2>
      </div>
    </div>
    <div style="margin-bottom: 20px;"></div>
        <form method="post" action="{% url 'return_item_list' %}">
            {% csrf_token %}
            <div class="form-group">
                <label for="itemDropdown">Select an item to manage:</label>
                <select class="form-control" id="itemDropdown" name="item_id">
                    <option value="" disabled selected>Select the item</option>
                    {% for item in assigned_items %}
                        <option value="{{ item.id }}">{{ item.name }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="mt-3"></div>


            <!-- Change Status Button -->
            <button id="changeStatusBtn" type="button" class="btn btn-primary" style="display: none;">
                Change Status
            </button>

            <!-- Return Item Button -->
            <button id="returnItemBtn" type="button" class="btn btn-success" style="display: none;">
                Return Item
            </button>

            <br>
            {% comment %} <button type="submit" class="btn btn-secondary">Submit</button> {% endcomment %}
        </form>
    </div>

    <script>
        // Add an event listener to the dropdown
        document.getElementById('itemDropdown').addEventListener('change', function () {
            // Get the selected item value
            var selectedItemId = this.value;

            // Show/hide buttons based on the selected item
            var changeStatusBtn = document.getElementById('changeStatusBtn');
            var returnItemBtn = document.getElementById('returnItemBtn');

            // You may customize the conditions based on your requirements
            if (selectedItemId !== '') {
                changeStatusBtn.style.display = 'inline-block';
                returnItemBtn.style.display = 'inline-block';
            } else {
                changeStatusBtn.style.display = 'none';
                returnItemBtn.style.display = 'none';
            }
        });

        // Add event listeners to redirect when buttons are clicked
        document.getElementById('changeStatusBtn').addEventListener('click', function () {
            var selectedItemId = document.getElementById('itemDropdown').value;
            window.location.href = '{% url "change_status" 0 %}'.replace('0', selectedItemId);
        });

        document.getElementById('returnItemBtn').addEventListener('click', function () {
            var selectedItemId = document.getElementById('itemDropdown').value;
            window.location.href = '{% url "return_item" 0 %}'.replace('0', selectedItemId);
        });
    </script>
{% endblock %}
